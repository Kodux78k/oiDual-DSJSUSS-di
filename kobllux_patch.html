<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KOBLLUX v7.9 ¬∑ Dual.Infodose</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Montserrat:wght@300;400;600;900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">

    <link rel="stylesheet" href="https://kodux78k.github.io/oiDual-KxT-di_oi/css/main.css">

    <style>
        /* IDs espec√≠ficos que o JS espera para os Drawers */
        .drawer { position: absolute; inset: 0; background: var(--panel); z-index: 50; transform: translateX(100%); transition: transform 0.4s var(--ease-overshoot); display: flex; flex-direction: column; padding: 20px; }
        .drawer.open { transform: translateX(0); }
        .drawer-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; }
        .drawer-content { flex: 1; overflow-y: auto; }
        
        /* Ajuste do BG custom */
        #bg-fake-custom { position: fixed; inset: 0; z-index: -2; background-size: cover; background-position: center; opacity: 0.3; }
        
        /* Scrollbar oculta no chat */
        #chat-container { flex: 1; overflow-y: auto; padding-bottom: 80px; scroll-behavior: smooth; }
        #chat-container::-webkit-scrollbar { width: 4px; }
        #chat-container::-webkit-scrollbar-thumb { background: var(--neon-cyan); border-radius: 4px; }
        
        /* √Årea de input fixa */
        .input-area-wrapper { margin-top: auto; }
        
        /* File input oculto */
        #fileUploadInput, #bgUploadInput { display: none; }
    </style>
    <style id="custom-styles"></style>
</head>
<body class="mode-night">

    <div id="bg-fake-custom"></div>
    <div id="particles-js"></div>
    <div class="ambient-light">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
    </div>

    <div id="nv-toast" class="toaster-wrap"><div class="toaster">Inicializando...</div></div>

    <div class="container">
        <div class="fusion-card active" id="dualChatModule">
            
            <div class="card-header">
                <div class="avatar-slot shown" id="orbToggle">
                    <img src="https://i.imgur.com/rN5iM8b.png" alt="Avatar" style="width:100%;height:100%;object-fit:cover;">
                </div>
                <div class="text-block" id="field-toggle-handle">
                    <div class="greeting-row">
                        <span class="txt-thin">KOBLLUX</span>
                        <span class="txt-heavy brand-dual">V7.9</span>
                    </div>
                    <span class="status-led" id="modeIndicator">SISTEMA ONLINE</span>
                </div>
                <div class="clock-widget">
                    <div class="time-display" id="statusSolarMode">NIGHT</div>
                    <button class="control-btn" id="btnDeck" title="Cristaliza√ß√£o (Mem√≥ria)">üíé</button>
                    <button class="control-btn" id="btnSettings" title="Configura√ß√µes">‚öôÔ∏è</button>
                </div>
            </div>

            <div class="card-body content-visible">
                <div id="chat-container">
                    <div class="msg-block ai">
                        <p><strong>Dual.Infodose v7.9</strong> ativa.<br>Sistema KOBLLUX integrado.</p>
                        <div class="footer-text">Aguardando pulso...</div>
                    </div>
                </div>

                <div id="filePreview" class="activation-card activation-hidden">
                    <div class="file-info"><span>arquivo.txt</span></div>
                    <div class="file-actions"></div>
                </div>
            </div>

            <div class="input-container">
                <input type="file" id="fileUploadInput">
                <button id="btnUploadFile" title="Enviar Arquivo">üìé</button>
                <input type="text" id="userInput" placeholder="Digite ou fale com Dual..." autocomplete="off">
                <button id="btnVoice" title="Voz">üéôÔ∏è</button>
                <button id="btnSend" title="Enviar">‚û§</button>
            </div>

            <div id="drawerProfile" class="drawer">
                <div class="drawer-header">
                    <h3>PERFIL KODUX</h3>
                    <button onclick="toggleDrawer('drawerProfile')" class="btn-sec">‚úï</button>
                </div>
                <div class="drawer-content">
                    <div class="form-grid">
                        <div class="input-group">
                            <label>Usu√°rio</label>
                            <input type="text" id="inputUserId" placeholder="Viajante">
                        </div>
                        <div class="input-group">
                            <label>Identidade Atual</label>
                            <div class="stat-box">
                                <span class="stat-val" id="usernameDisplay">...</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-section">
                        <label>Ciclos Solares</label>
                        <div class="settings-actions">
                            <button id="btnAutoSolar" class="btn btn-sec">Auto</button>
                            <button id="btnCycleSolar" class="btn btn-sec">Ciclar Manual</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="drawerSettings" class="drawer">
                <div class="drawer-header">
                    <h3>CONFIGURA√á√ïES DI</h3>
                    <button onclick="toggleDrawer('drawerSettings')" class="btn-sec">‚úï</button>
                </div>
                <div class="drawer-content">
                    <div class="col">
                        <div class="input-group">
                            <label>API Key (OpenRouter)</label>
                            <input type="password" id="apiKeyInput" placeholder="sk-or-...">
                        </div>
                        <div class="input-group">
                            <label>Modelo IA</label>
                            <input type="text" id="inputModel" placeholder="nvidia/nemotron...">
                        </div>
                        <div class="input-group">
                            <label>System Role (Prompt)</label>
                            <textarea id="systemRoleInput" rows="4" class="cyber-input"></textarea>
                        </div>
                        <div class="input-group">
                            <label>Custom CSS</label>
                            <textarea id="customCssInput" rows="3" class="cyber-input" placeholder=".fusion-card { ... }"></textarea>
                        </div>
                        <div class="settings-actions">
                            <input type="file" id="bgUploadInput" accept="image/*">
                            <button onclick="document.getElementById('bgUploadInput').click()" class="btn btn-sec">Upload BG</button>
                            <button id="btnClearCss" class="btn btn-sec danger">Limpar CSS</button>
                        </div>
                    </div>
                    <div class="settings-actions" style="margin-top:20px">
                        <button id="btnSaveConfig" class="btn btn-prim" style="width:100%">SALVAR SISTEMA</button>
                    </div>
                </div>
            </div>

            <div id="drawerDeck" class="drawer">
                <div class="drawer-header">
                    <h3>MEM√ìRIA CRISTALIZADA</h3>
                    <button onclick="toggleDrawer('drawerDeck')" class="btn-sec">‚úï</button>
                </div>
                <div class="drawer-content">
                    <div class="settings-actions" style="margin-bottom:15px">
                        <button id="btnCrystallize" class="btn btn-prim">üíé Cristalizar Sess√£o Atual</button>
                    </div>
                    <div id="deckList" class="crystal-list">
                        </div>
                </div>
            </div>

        </div> </div>

    <svg style="display: none;">
        <symbol id="icon-copy" viewBox="0 0 24 24"><path fill="currentColor" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></symbol>
        <symbol id="icon-mic" viewBox="0 0 24 24"><path fill="currentColor" d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/><path fill="currentColor" d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/></symbol>
        <symbol id="icon-edit" viewBox="0 0 24 24"><path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></symbol>
        <symbol id="icon-trash" viewBox="0 0 24 24"><path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></symbol>
        <symbol id="icon-download" viewBox="0 0 24 24"><path fill="currentColor" d="M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"/></symbol>
        <symbol id="icon-sandbox" viewBox="0 0 24 24"><path fill="currentColor" d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></symbol>
        <symbol id="icon-pdf" viewBox="0 0 24 24"><path fill="currentColor" d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h2V8.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z"/></symbol>
        <symbol id="icon-code" viewBox="0 0 24 24"><path fill="currentColor" d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/></symbol>
        <symbol id="icon-eye" viewBox="0 0 24 24"><path fill="currentColor" d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></symbol>
        <symbol id="icon-maximize" viewBox="0 0 24 24"><path fill="currentColor" d="M3 5v4h2V5h4V3H3v2zm2 10H3v4h6v-2H5v-2zm14 4h-4v2h6v-6h-2v4zm0-16h-4v2h4v4h2V3h-2z"/></symbol>
        <symbol id="icon-restore" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z"/></symbol>
    </svg>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

    <script src="https://kodux78k.github.io/oiDual-KxT-di_oi/js/modules/inline-1.js"></script>

</body>
</html>
